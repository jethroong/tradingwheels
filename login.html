<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TradingWheels - Login</title>
    <!-- Axios API -->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />

    <!-- Bootstrap JS CDN -->
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"
    ></script>

    <!-- JQuery CDN -->
    <script
      src="https://code.jquery.com/jquery-3.6.0.min.js"
      integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
      crossorigin="anonymous"
    ></script>

    <!-- Validation CDN-->
    <script src = "https://cdn.jsdelivr.net/npm/jquery-validation@1.19.3/dist/jquery.validate.js"></script>

    <!-- file CSS -->
    <link rel="stylesheet" href="login.css" />
  </head>
  <body>
    <div class="login-bar">
      <div class="scrolling">
        <div class="d-flex align-content-center fw-bold mb-4">
          <img
            src="images/logo.png"
            height="40px"
            width="66px"
            alt=""
            class="me-3"
          />
          <p>TradingWheels</p>
        </div>

        <div class="d-flex align-content-center mb-3">
          <p class="me-2 login-label">User Login</p>
          <hr width="10%" />
        </div>

        <h1 class="fw-bold mb-5">
          Welcome back! <br />
          We are glad to see <br />
          you :)
        </h1>

        <hr class="mb-4" />


          <p class="login-label">Email</p>
          <input type="text" id="email"/>
          <p class="login-label">Password</p>
          <input type="password" id="password"/>



        <div class="mt-3 mb-3">
          <button id='login'>Login</button>
        </div>

        <p class="subtext">
          No account yet? <a href="signup.html">Register</a>
        </p>
      </div>
    </div>
    <iframe
      src="https://app.vectary.com/p/1A4CxAD3B8qVcn5OKNqYT8"
      frameborder="0"
      width="100%"
      height="100%"
    ></iframe>
  </body>
</html>

<script>




  $('#login').click(function (){
    $(".error-text").text("");

  var email = $("#email").val();
  var password = $("#password").val();
  const url = 'http://127.0.0.1:5002/login';
  console.log(email,password);
  axios.post(url, {
    email: email,
    password: password
  })
  .then(response => {
    if(response.data.code == 200){
      document.cookie = "email=" + email;
            window.location.replace("stock_view.html");
        }
    }
  )
  .catch(error => {
    $(".scrolling").append(
            "<p class='error-text'>Please check your credentials again. </p>"
          );
    console.log(error);
  });
})
    
  
</script>
